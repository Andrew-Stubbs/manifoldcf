<!DOCTYPE html>
<!--
Copyright 2014 The Apache Software Foundation.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<input name="serverconfigop" type="hidden" value="Continue"/>
#if(!(! $serverHTTPSKeystore) && ("$!serverHTTPSKeystore" == ""))
<input type="hidden" name="serverhttpskeystoredata" value="$Encoder.attributeEscape($serverHTTPSKeystore)"/>
#end
#if($TabName == $ResourceBundle.getString('LivelinkConnector.Server'))
<table class="displaytable">
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerProtocol'))</td>
    <td class="value">
      <select name="serverprotocol" size="2">
        <option value="internal" #if($serverProtocol == 'internal') selected="selected" #{else} "" #end >$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.internal'))</option>
        <option value="http"     #if($serverProtocol == 'http')     selected="selected" #{else} "" #end >http</option>
        <option value="https"    #if($serverProtocol == 'https')    selected="selected" #{else} "" #end >https</option>
       </select>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerName'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="64" name="servername" value="$Encoder.attributeEscape($serverName)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerPort'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="5" name="serverport" value="$serverPort"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerUserName'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="serverusername" value="$Encoder.attributeEscape($serverUserName)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerPassword'))</nobr>
    </td>
    <td class="value">
      <input type="password" size="32" name="serverpassword" value="$Encoder.attributeEscape($serverPassword)"/>
    </td>
  </tr>
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerHTTPCGIPath'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="serverhttpcgipath" value="$Encoder.attributeEscape($serverHTTPCgiPath)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerHTTPNTLMDomain'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.SetIfNTLMAuthDesired'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="serverhttpntlmdomain" value="$Encoder.attributeEscape($serverHTTPNTLMDomain)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerHTTPNTLMUserName'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="serverhttpntlmusername" value="$Encoder.attributeEscape($serverHTTPNTLMUserName)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerHTTPNTLMPassword'))</nobr>
    </td>
    <td class="value">
      <input type="password" size="32" name="serverhttpntlmpassword" value="$Encoder.attributeEscape($serverHTTPNTLMPassword)"/>
    </td>
  </tr>
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.ServerSSLCertificateList'))</nobr>
    </td>
    <td class="value">
      <input type="hidden" name="serverkeystorealias" value=""/>
      <table class="displaytable">
        #if($hasServerCertificates)
          #foreach($cert in $serverCertificatesMap.entrySet())
        <tr>
          <td class="value">
            <input type="button" onclick='Javascript:ServerDeleteCertificate($Encoder.attributeJavascriptEscape($cert.Key))'
                   alt="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.DeleteCert')) + $Encoder.attributeEscape($cert.Key)"
                   value="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.Delete'))"/>
          <td>$Encoder.bodyEscape($cert.Value)</td>
          </td>
        </tr>
          #end
        #else
        <tr>
          <td class="message" colspan="2">
            <nobr>$ResourceBundle.getString('LivelinkConnector.NoCertificatesPresent')</nobr>
          </td>
        </tr>
        #end
      </table>
      <input type="button" onclick='Javascript:ServerAddCertificate()' alt="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.AddCert'))"
             value="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.Add'))"/>&nbsp;
      $Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.Certificate'))
      <input name="servercertificate" size="50" type="file"/>
    </td>
  </tr>
</table>
#else
<input type="hidden" name="serverprotocol"          value="$!serverProtocol"/>
<input type="hidden" name="servername"              value="$Encoder.attributeEscape($!serverName)"/>
<input type="hidden" name="serverport"              value="$!serverPort"/>
<input type="hidden" name="serverusername"          value="$Encoder.attributeEscape($!serverUserName)"/>
<input type="hidden" name="serverpassword"          value="$Encoder.attributeEscape($!serverPassword)"/>
<input type="hidden" name="serverhttpcgipath"       value="$Encoder.attributeEscape($!serverHTTPCgiPath)"/>
<input type="hidden" name="serverhttpntlmdomain"    value="$Encoder.attributeEscape($!serverHTTPNTLMDomain)"/>
<input type="hidden" name="serverhttpntlmusername"  value="$Encoder.attributeEscape($!serverHTTPNTLMUserName)"/>
<input type="hidden" name="serverhttpntlmpassword"  value="$Encoder.attributeEscape($!serverHTTPNTLMPassword)"/>
#end
<input name="ingestconfigop" type="hidden" value="Continue"/>
#if(!(! $ingestKeystore) && ("$!ingestKeystore" == ""))
<input type="hidden" name="ingestkeystoredata" value="$Encoder.attributeEscape($ingestKeystore)"/>
#end
#if($TabName == $ResourceBundle.getString('LivelinkConnector.DocumentAccess'))
<table class="displaytable">
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchProtocol'))</td>
    <td class="value">
      <select name="ingestprotocol" size="3">
        <option value="" #if($ingestProtocol == '') selected="selected" #{else} "" #end >$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.UseLAPI'))</option>
        <option value="http"     #if($ingestProtocol == 'http')     selected="selected" #{else} "" #end >http</option>
        <option value="https"    #if($ingestProtocol == 'https')    selected="selected" #{else} "" #end >https</option>
      </select>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchPort'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="5" name="ingestport" value="$!ingestPort"/>
    </td>
  </tr>
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchCGIPath'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="ingestcgipath" value="$Encoder.attributeEscape($!ingestCgiPath)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchNTLMDomain'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.SetIfNTLMAuthDesired'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="ingestntlmdomain" value="$Encoder.attributeEscape($!ingestNtlmDomain)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchNTLMUserName'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.SetIfDifferentFromServerUserName'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="ingestntlmusername" value="$Encoder.attributeEscape($!ingestNtlmUsername)"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchNTLMPassword'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.SetIfDifferentFromServerPassword'))</nobr>
    </td>
    <td class="value">
      <input type="password" size="32" name="ingestntlmpassword" value="$Encoder.attributeEscape($!ingestNtlmPassword)"/>
    </td>
  </tr>
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentFetchSSLCertificateList'))</nobr>
    </td>
    <td class="value">
      <input type="hidden" name="ingestkeystorealias" value=""/>
      <table class="displaytable">
        #if($hasIngestCertificates)
          #foreach($cert in $ingestCertificatesMap.entrySet())
        <tr>
          <td class="value">
            <input type="button" onclick='Javascript:IngestDeleteCertificate($Encoder.attributeJavascriptEscape($cert.Key))'
                   alt="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.DeleteCert')) + $Encoder.attributeEscape($cert.Key)"
                   value="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.Delete'))"/>
          <td>$Encoder.bodyEscape($cert.Value)</td>
          </td>
        </tr>
          #end
        #else
        <tr>
          <td class="message" colspan="2">
            <nobr>$ResourceBundle.getString('LivelinkConnector.NoCertificatesPresent')</nobr>
          </td>
        </tr>
        #end
      </table>
      <input type="button" onclick='Javascript:IngestAddCertificate()' alt="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.AddCert'))"
             value="$Encoder.attributeEscape($ResourceBundle.getString('LivelinkConnector.Add'))"/>&nbsp;
      $Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.Certificate'))
      <input name="ingestcertificate" size="50" type="file"/>
    </td>
  </tr>
</table>
#else
<input type="hidden" name="ingestprotocol"      value="$!ingestProtocol"/>
<input type="hidden" name="ingestport"          value="$!ingestPort"/>
<input type="hidden" name="ingestcgipath"       value="$Encoder.attributeEscape($!ingestCgiPath)"/>
<input type="hidden" name="ingestntlmusername"  value="$Encoder.attributeEscape($!ingestNtlmUsername)"/>
<input type="hidden" name="ingestntlmpassword"  value="$Encoder.attributeEscape($!ingestNtlmPassword)"/>
<input type="hidden" name="ingestntlmdomain"    value="$Encoder.attributeEscape($!ingestNtlmDomain)"/>
#end

#if($TabName == $ResourceBundle.getString('LivelinkConnector.DocumentView'))
<table class="displaytable">
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentViewProtocol'))</td>
    <td class="value">
      <select name="viewprotocol" size="3">
        <option value="" #if($viewProtocol == '') selected="selected" #{else} "" #end >$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.SameAsFetchProtocol'))</option>
        <option value="http"     #if($viewProtocol == 'http')     selected="selected" #{else} "" #end >http</option>
        <option value="https"    #if($viewProtocol == 'https')    selected="selected" #{else} "" #end >https</option>
      </select>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentViewServerName'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.BlankSameAsFetchServer'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="64" name="viewservername" value="$Encoder.attributeEscape($!viewServerName)"/>
    </td>
  </tr>
  <tr><td class="separator" colspan="2"><hr/></td></tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentViewPort'))</nobr>
      <br/>
      <nobr>(blank = same as fetch port)</nobr>
    </td>
    <td class="value">
      <input type="text" size="5" name="viewport" value="$!viewPort"/>
    </td>
  </tr>
  <tr>
    <td class="description">
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.DocumentViewCGIPath'))</nobr>
      <br/>
      <nobr>$Encoder.bodyEscape($ResourceBundle.getString('LivelinkConnector.BlankSameAsFetchServer'))</nobr>
    </td>
    <td class="value">
      <input type="text" size="32" name="viewcgipath" value="$Encoder.attributeEscape($!viewCgiPath)"/>
    </td>
  </tr>
</table>
#else
<input type="hidden" name="viewprotocol"      value="$!viewProtocol"/>
<input type="hidden" name="viewservername"          value="$!viewServerName"/>
<input type="hidden" name="viewport"       value="$!viewPort"/>
<input type="hidden" name="viewcgipath"  value="$Encoder.attributeEscape($!viewCgiPath)"/>
#end